{"version":3,"file":"index.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\n\nimport styles from './styles.css'\n\nclass Prompt extends React.Component {\n  constructor(props) {\n      super(props);\n      this.state = {\n          value: props.defaultValue\n      };\n  }\n\n  changeState = e => {\n      this.setState({ value: e.target.value });\n  }\n\n  componentDidUpdate(prevProps) {\n      if (prevProps.defaultValue !== this.props.defaultValue) this.setState({ value: this.props.defaultValue });\n  }\n\n  render() {\n      const { className, style, title, description, onAccept, onCancel, acceptCaption, cancelCaption, allowEmpty } = this.props;\n\n      return <div className={className} style={style}>\n          {title ? <div className=\"modal__title\">{title}</div> : null}\n          <div className=\"modal__content\">\n              {description ? <div className=\"modal__description\">{description}</div> : null}\n              <div className=\"modal__input\">\n                  <input value={this.state.value} onChange={this.changeState} />\n              </div>\n              <div className=\"modal__buttons\">\n                  {allowEmpty && this.state.value === \"\" ? null :\n                      <div className=\"modal__accept-button\" onClick={() => onAccept(this.state.value)}>{acceptCaption}</div>\n                  }\n                  <div className=\"modal__cancel-button\" onClick={onCancel}>{cancelCaption}</div>\n              </div>\n          </div>\n      </div>;\n  }\n}\n\n// Singleton\nclass Asker {\n  constructor(viewKey) {\n      this.component = null;\n      this.element = null;\n      this.viewKey = viewKey;\n  }\n\n  connectView = component => {\n      this.component = component;\n      this.updateView();\n  }\n\n  disconnectView = () => {\n      this.component = null;\n  }\n\n  updateView = () => {\n      if (this.component) this.component.setState({ [this.viewKey]: this.element ? { ...this.element } : null });\n  }\n\n  add = el => {\n      if (!el.onAccept) return console.log(\"Asker element without onAccept method!\", el);\n      if (el.onAccept) {\n          const onAccept = el.onAccept;\n          el.onAccept = (...args) => {\n              onAccept(...args);\n              this.close(el.id);\n          };\n      }\n      this.element = el;\n      this.updateView();\n  }\n\n  close = () => {\n      this.element = null;\n      this.updateView();\n  }\n\n  prompt({ title, description, defaultValue, onAccept, acceptCaption = \"zapisz\", cancelCaption = \"porzuć\", allowEmpty = false, decoration }) {\n      this.add({\n          type: \"prompt\",\n          title,\n          description,\n          defaultValue,\n          onAccept,\n          acceptCaption,\n          cancelCaption,\n          allowEmpty,\n          decoration,\n      });\n  }\n\n  confirm({ title = \"Czy jesteś tego pewny?\", description, onAccept, acceptCaption = \"tak\", cancelCaption = \"nie\", decoration }) {\n      this.add({\n          type: \"confirm\",\n          title,\n          description,\n          onAccept,\n          acceptCaption,\n          cancelCaption,\n          decoration,\n      });\n  }\n}\n\nconst asker = new Asker(\"modal\");\n\nclass AskerView extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { modal: null };\n    }\n\n    componentDidMount() { asker.connectView(this); }\n    componentWillUnmout() { asker.disconnectView(this); }\n\n    render() {\n        const { modal } = this.state;\n\n        if (!modal) return null;\n\n        const zIndex = this.props.zIndex || 10000;\n        let className = \"modal\";\n        if (modal.decoration) className += ` modal-${modal.decoration}`;\n\n        switch (modal.type) {\n            case \"confirm\":\n                return <div className={className} style={{ zIndex }}>\n                    <div className=\"modal__title\">{modal.title}</div>\n                    <div className=\"modal__content\">\n                        <div className=\"modal__description\">{modal.description}</div>\n                        <div className=\"modal__buttons\">\n                            <div className=\"modal__accept-button\" onClick={modal.onAccept}>{modal.acceptCaption}</div>\n                            <div className=\"modal__cancel-button\" onClick={asker.close}>{modal.cancelCaption}</div>\n                        </div>\n                    </div>\n                </div>\n                break;\n            case \"prompt\":\n                return <Prompt\n                    className={className}\n                    style={{ zIndex }}\n                    title={modal.title}\n                    description={modal.description}\n                    defaultValue={modal.defaultValue}\n                    onAccept={modal.onAccept}\n                    onCancel={asker.close}\n                    acceptCaption={modal.acceptCaption}\n                    cancelCaption={modal.cancelCaption}\n                />\n                break;\n            default: return null;\n        }\n    }\n}\n\nexport { AskerView, asker };"],"names":["Prompt","props","changeState","setState","value","e","target","state","defaultValue","prevProps","className","style","title","description","onAccept","onCancel","acceptCaption","cancelCaption","allowEmpty","React","Component","Asker","viewKey","connectView","component","updateView","disconnectView","element","add","el","console","log","close","id","decoration","asker","AskerView","modal","zIndex","type"],"mappings":"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"}